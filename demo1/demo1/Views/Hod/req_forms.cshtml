
@using demo1.Models;
@{
    Boolean req_pending_forms = ViewData["req_pending_forms"] != null ? (Boolean)ViewData["req_pending_forms"] : false;
    ViewBag.Title = "req_forms";
    List<RequisitionFormDetail> form_cart = (List<RequisitionFormDetail>)ViewData["form_cart"];
    Employee emp = (Employee)ViewData["emp"];
    DepartmentList emp_dept = (DepartmentList)ViewData["emp_dept"];
    string form_number = (string)ViewData["form_number"];
    RequisitionForm form = (RequisitionForm)ViewData["req_form"];
    List<StationeryCatalog> items = (List<StationeryCatalog>)ViewData["catalog_list"];
}
@Html.Partial("_hodheader")
@Html.Partial("_hodMenuFragment")
@Html.Partial("_hod_notify")

<div style="margin-left:25%">
    <h3>Form number = @(emp_dept.DepartmentCode + "/" + (1000 + int.Parse(form_number)).ToString())</h3>
    <h3>Employee name : @emp.FirstName @emp.LastName</h3>
    <h3>Department name : @emp_dept.DepartmentName</h3>
    <table id="myTable">
        <tr>
            <td>Description</td>
            <td>Quantity</td>
        </tr>
        @if (form_cart != null)
        {
            foreach (var item in form_cart)
            {
                <tr>
                    <td>
                        @items.Find(x => x.ItemNumber == item.ItemNumber).Description
                    </td>
                    <td>
                        @item.Quantity
                    </td>
                </tr>
            }

            <tr>
                @if (req_pending_forms)
                {
                    using (Html.BeginForm("approve_reject", "Hod", FormMethod.Post))
                    {
                        <td>
                            <input type="text" value="" name="comment" />
                            <input type="hidden" value=@form.FormNumber name="form_id" />
                            <input type="hidden" value=@emp.Id name="approved_by" />
                            @*<input type="hidden" id="hidden_status" value="" name="form_status" />*@
                        </td>
                        <td>
                            <input id="approve_btn" type="submit" value="APPROVE" name="form_status" />
                        </td>
                        <td>
                            <input id="reject_btn" type="submit" value="REJECT" name="form_status" />
                        </td>
                    }
                }
                else
                {

                    if (form.Comments != "" && form.Comments != null)
                    {
                        <td>
                            Comments :
                        </td>
                        <td>
                            <input type="text" value="@form.Comments" />
                        </td>
                    }
                }
            </tr>
        }

    </table>
</div>
